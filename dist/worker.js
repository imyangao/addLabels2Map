!function(){"use strict";function r(r){var l=null,i=null,f=function(){var r={2101:[239,200,200],2112:[255,174,185],2114:[204,204,204],2201:[138,211,175],2202:[51,204,153],2213:[170,203,175],2230:[181,227,181],2301:[157,157,108],3103:[254,254,254],3302:[204,153,255],4101:[234,216,189],4102:[230,255,204],4103:[171,223,150],4104:[255,255,192],4105:[40,200,254],4107:[141,197,108],4108:[174,209,160],4109:[207,236,168],4111:[190,239,255],5112:[181,208,208],1e4:[204,204,204],10001:[204,204,204],10002:[204,204,204],10100:[204,204,204],10101:[204,204,204],10102:[204,204,204],10200:[153,96,137],10201:[153,96,137],10202:[153,96,137],10300:[230,0,0],10301:[230,0,0],10302:[230,0,0],10310:[230,0,0],10311:[230,0,0],10312:[230,0,0],10400:[255,170,0],10401:[255,170,0],10402:[255,170,0],10410:[255,170,0],10411:[255,170,0],10412:[255,170,0],10500:[255,255,0],10501:[255,255,0],10502:[255,255,0],10510:[255,255,0],10511:[255,255,0],10512:[255,255,0],10600:[255,255,255],10601:[255,255,255],10602:[255,255,255],10700:[255,255,255],10701:[255,255,255],10702:[255,255,255],10710:[255,255,255],10711:[255,255,255],10712:[255,255,255],10790:[255,255,255],10791:[255,255,255],10792:[255,255,255],10720:[179,179,0],10721:[179,179,0],10722:[179,179,0],10730:[156,156,156],10731:[156,156,156],10732:[156,156,156],10740:[255,211,127],10741:[255,211,127],10742:[255,211,127],10750:[255,167,127],10751:[255,167,127],10752:[255,167,127],10760:[255,167,127],10761:[255,167,127],10762:[255,167,127],10780:[255,255,255],12400:[190,232,255],12405:[190,232,255],12415:[190,232,255],12425:[190,232,255],12435:[190,232,255],12500:[190,232,255],12505:[190,232,255],12800:[190,232,255],12820:[190,232,255],13e3:[0,0,0],14e3:[104,104,104],14002:[104,104,104],14003:[104,104,104],14010:[255,255,222],14030:[156,156,156],14040:[201,235,112],14050:[255,255,190],14060:[140,168,0],14070:[140,168,0],14072:[140,168,0],14073:[140,168,0],14080:[140,168,0],14090:[140,168,0],14100:[204,204,204],14102:[204,204,204],14103:[204,204,204],14110:[204,204,204],14112:[204,204,204],14113:[204,204,204],14120:[255,255,222],14130:[201,235,112],14132:[201,235,112],14133:[201,235,112],14140:[252,179,251],14142:[252,179,251],14143:[252,179,251],14160:[255,255,255],14162:[255,255,255],14170:[201,235,112],14180:[255,255,255],14182:[255,255,255],14183:[255,255,255],14190:[255,255,115],wet:[254,229,217],dry:[252,174,145],verydry:[251,106,74],extremelydry:[203,24,29],drynessunknown:[128,128,128],0:[254,229,217],1:[252,174,145],2:[251,106,74],3:[203,24,29],"-1":[128,128,128]},e={};for(var n in r){var t=r[n],a={};a.r=t[0],a.g=t[1],a.b=t[2],a.r_frac=t[0]/255,a.g_frac=t[1]/255,a.b_frac=t[2]/255,e[n]=a}return e}(),u={vertices:[],triangles:[],boundaries:{triangles:[],deltas:[]}},c=null;r.split("\n").forEach((function(r){if(0!=r.length){var h,g=(r=r.replace(/\s*$/,"")).split(" ");switch(g[0]){case"v":u.vertices.push([parseFloat(g[1]),parseFloat(g[2]),parseFloat(g[3])]);break;case"g":var v=g[1].split("_")[0];void 0===(l=f[v])&&(console.error("color not defined for feature class "+v),l={r_frac:1,g_frac:0,b_frac:0});break;case"f":for(var d=1;d<=3;d++){var p=u.vertices[parseInt(g[d])-1];u.triangles.push([p[0],p[1],p[2],l.r_frac,l.g_frac,l.b_frac])}break;case"#":g.length>1&&(i=parseFloat(g[1]),c=parseInt(g[2]));break;case"l":for(var b=[],w=1;w<g.length;w++)b.push(u.vertices[g[w]-1]);for(var _=[],y=0;y<b.length;y++){var m=b[y];console.assert(m[2]<i),_.push([m[0],m[1],m[2],i])}22006===c&&(console.log("parse.js polyline for "+c+":",b),console.log("         point_records for "+c+":",_));for(var N=0;N<_.length-1;N++){var F=_[N],q=_[N+1],k=a(F.slice(0,2),q.slice(0,2)),V=(h=k,Math.sqrt(function(r){return function(r,e){if(r.length!=e.length)throw"Vector dimensions should be equal";for(var n=0,t=0;t<r.length;t++)n+=r[t]*e[t];return n}(r,r)}(h)));if(0!=V){var A=t(k,V),x=e(n(A,-1),o(A)),I=e(n(A,-1),s(A)),M=e(A,o(A)),j=e(A,s(A));u.boundaries.triangles.push(F,F,q,F,q,q),u.boundaries.deltas.push(I,x,j,x,M,j)}}}}}));var h=new Float32Array(u.triangles.flat(1)),g=new Float32Array(u.boundaries.triangles.flat(1)),v=new Float32Array(u.boundaries.deltas.flat(1));return[h.buffer,g.buffer,v.buffer]}function e(r,e){var n=[];if(isNaN(e)){if(r.length!=e.length)throw"Vector dimensions should be equal";for(var t=0;t<r.length;t++)n.push(r[t]+e[t])}else for(var a=0;a<r.length;a++)n.push(r[a]+e);return n}function n(r,e){var n=[];if(isNaN(e)){if(r.length!=e.length)throw"Vector dimensions should be equal";for(var t=0;t<r.length;t++)n.push(r[t]*e[t])}else for(var a=0;a<r.length;a++)n.push(r[a]*e);return n}function t(r,e){var n=[];if(isNaN(e)){if(r.length!=e.length)throw"Vector dimensions should be equal";for(var t=0;t<r.length;t++)n.push(r[t]/e[t])}else for(var a=0;a<r.length;a++)n.push(r[a]/e);return n}function a(r,e){return function(r,e){var n=[];if(isNaN(e)){if(r.length!=e.length)throw"Vector dimensions should be equal";for(var t=0;t<r.length;t++)n.push(r[t]-e[t])}else for(var a=0;a<r.length;a++)n.push(r[a]-e);return n}(e,r)}function s(r){return[-r[1],r[0]]}function o(r){return[r[1],-r[0]]}self.onmessage=function(e){var n=e.data.id,t=e.data.msg;console.log("fetching "+t),fetch(t).then((function(r){return r.text()})).then((function(e){var t=r(e);console.log(t),postMessage({id:n,msg:t},t)})).catch((function(r){console.error(r)}))}}();
